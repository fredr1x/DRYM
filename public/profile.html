<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Профиль | DRYM</title>
    <link rel="icon" href="/resources/favicon.ico" type="image/png">
    <link rel="stylesheet" href="profile.css" />
    <script
            src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"
    ></script>
</head>
<body>
<!-- Fixed Header / Navbar -->
<header class="app-header">
    <div class="header-inner">
        <a href="home.html" class="brand">
            <span class="brand-logo">OS</span>
            <span class="brand-text">Online Shopping</span>
        </a>

        <nav class="nav-links">
            <a href="#" class="nav-link">Моя корзина</a>
            <a href="#" class="nav-link">Мои заказы</a>
            <a href="#" class="nav-link">Избранные</a>
            <a href="#" class="nav-link nav-link-active">Профиль</a>
        </nav>

        <button class="nav-toggle" aria-label="Открыть меню">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>
</header>

<!-- Page Content -->
<main class="page">
    <section class="profile-section">
        <div class="profile-card">
            <div class="profile-header">
                <div class="avatar">
                    <span id="avatarInitials">U</span>
                </div>
                <div class="profile-main-info">
                    <h1 class="profile-name">
                        <span id="firstName">—</span>
                        <span id="lastName">—</span>
                    </h1>
                    <p class="profile-email" id="email">—</p>
                </div>
            </div>

            <div class="profile-balance">
                <div>
                    <span class="balance-label">Баланс</span>
                    <div class="balance-value">
                        <span id="balance">0.00</span>
                        <span class="balance-currency">₸</span>
                    </div>
                </div>
                <button id="rechargeBtn" class="btn primary">Пополнить</button>
            </div>

            <div class="profile-actions">
                <button id="updateProfileBtn" class="btn ghost">
                    Обновить профиль
                </button>
                <button id="changePasswordBtn" class="btn outline">
                    Сменить пароль
                </button>
                <button
                        id="moderatorPanelBtn"
                        class="btn ghost"
                        style="display: none"
                >
                    Панель модератора
                </button>
            </div>
        </div>

        <div class="profile-secondary">
            <div class="info-card">
                <h2>Последняя активность</h2>
                <p class="muted">
                    Здесь могут отображаться ваши последние действия: заказы, пополнения
                    баланса и изменения профиля.
                </p>
            </div>
            <div class="info-card">
                <h2>Настройки профиля</h2>
                <p class="muted">
                    Управляйте личной информацией, безопасностью аккаунта и
                    уведомлениями в одном месте.
                </p>
            </div>
        </div>
    </section>
</main>

<!-- Backdrop for modals -->
<div class="modal-backdrop" id="modalBackdrop"></div>

<!-- Update Profile Modal -->
<div class="modal" id="updateProfileModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-header">
            <h2>Обновить профиль</h2>
            <button class="modal-close" data-modal-close>&times;</button>
        </div>
        <form id="updateProfileForm" class="modal-body">
            <div class="field">
                <label for="modalFirstName">Имя</label>
                <input
                        type="text"
                        id="modalFirstName"
                        name="firstName"
                        required
                        autocomplete="given-name"
                />
            </div>
            <div class="field">
                <label for="modalLastName">Фамилия</label>
                <input
                        type="text"
                        id="modalLastName"
                        name="lastName"
                        required
                        autocomplete="family-name"
                />
            </div>
            <p class="form-error" id="updateProfileError"></p>
            <div class="modal-footer">
                <button type="button" class="btn ghost" data-modal-close>
                    Отмена
                </button>
                <button type="submit" class="btn primary">Сохранить</button>
            </div>
        </form>
    </div>
</div>

<!-- Recharge Modal -->
<div class="modal" id="rechargeModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-header">
            <h2>Пополнить баланс</h2>
            <button class="modal-close" data-modal-close>&times;</button>
        </div>
        <form id="rechargeForm" class="modal-body">
            <div class="field">
                <label for="rechargeAmount">Сумма пополнения (₸)</label>
                <input
                        type="number"
                        id="rechargeAmount"
                        name="amount"
                        min="1"
                        step="0.01"
                        required
                />
            </div>
            <p class="form-error" id="rechargeError"></p>
            <div class="modal-footer">
                <button type="button" class="btn ghost" data-modal-close>
                    Отмена
                </button>
                <button type="submit" class="btn primary">Сохранить</button>
            </div>
        </form>
    </div>
</div>

<!-- Change Password Modal -->
<div class="modal" id="changePasswordModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-header">
            <h2>Сменить пароль</h2>
            <button class="modal-close" data-modal-close>&times;</button>
        </div>
        <form id="changePasswordForm" class="modal-body">
            <div class="field">
                <label for="currentPassword">Текущий пароль</label>
                <input
                        type="password"
                        id="currentPassword"
                        name="currentPassword"
                        required
                        autocomplete="current-password"
                />
            </div>
            <div class="field">
                <label for="newPassword">Новый пароль</label>
                <input
                        type="password"
                        id="newPassword"
                        name="newPassword"
                        required
                        minlength="6"
                        autocomplete="new-password"
                />
            </div>
            <div class="field">
                <label for="confirmPassword">Подтвердите пароль</label>
                <input
                        type="password"
                        id="confirmPassword"
                        name="confirmPassword"
                        required
                        minlength="6"
                        autocomplete="new-password"
                />
            </div>
            <p class="form-error" id="changePasswordError"></p>
            <div class="modal-footer">
                <button type="button" class="btn ghost" data-modal-close>
                    Отмена
                </button>
                <button type="submit" class="btn primary">Сохранить</button>
            </div>
        </form>
    </div>
</div>

<!-- Toast notification -->
<div id="toast" class="toast" aria-live="polite"></div>

<script src="profile.js"></script>
</body>
</html>
